@model CoOpHub.ViewModels.CoopsViewModel

@{
	ViewBag.Title = "Home Page";
}

<h1>@Model.Heading</h1>
<ul class="coops voffset4">
	@foreach (var coop in Model.UpcomingCoops)
	{
		<li>
			<div class="date">
				<div class="month">
					@coop.DateTime.ToString("MMM")
				</div>
				<div class="day">
					@coop.DateTime.ToString("d ")
				</div>
			</div>
			<div class="details">
				<span class="host">
					@coop.Host.Name
					@*@if (Model.ShowActions)
					{
						<button class="btn btn-link btn-sm js-toggle-follow" data-user-id="@coop.ArtistId">Follow</button>
					}*@
				</span>
				<span class="game">
					@coop.Game.Name
				</span>
				<span class="genre">
					@coop.Game.Genre.Name
				</span>
				@if (Model.ShowActions)
				{
					@*<button class="btn btn-default btn-sm pull-right js-toggle-attendance" data-coop-id="@coop.Id">Going ?</button>*@
				}

			</div>
		</li>
	}
</ul>

@section scripts
{
	@*<script>
		$(document).ready(function () {
			// subscribe to gig click event
			$(".js-toggle-attendance").click(function (e) {
				var button = $(e.target);

				// Make Ajax call to api
				$.post("/api/attendances", { gigId: button.attr("data-gig-id") })
					.done(function () {
						// Success callback - when api call done, update button look
						button
							.removeClass("btn-default")
							.addClass("btn-info")
							.text("Going");
					})
					.fail(function () {
						// Error callback
						alert("Something failed!");
					});
			});

			// follow artist click event
			$(".js-toggle-follow").click(function (e) {
				var button = $(e.target);

				// Make ajax call to api
				$.post("/api/followings", { followeeId: button.attr("data-user-id") })
					.done(function () {
						// Success callback - when api call done, update button look
						button.text("Following");
					})
					.fail(function () {
						// Error callback
						alert("Something failed!");
					});

			});
		});
	</script>*@
}